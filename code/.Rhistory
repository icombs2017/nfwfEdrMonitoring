panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.text = element_text(size = 9),
legend.position = "none",
plot.background = element_blank())
mainKeys <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.1) +
geom_sf(data = bathy$geometry, color = "gray75", size = 0.25) +
coord_sf(xlim = c(-81.955348, -81.689479), ylim = c(24.448239,  24.616647)) +
geom_star(data = edr, aes(x = long_x, y = lat_y, starshape = reef, fill = reef), size = 10)+
#Left Segment
geom_segment(aes(x = -81.86, y = 24.47, xend = -81.900, yend = 24.485), size = 0.25) +
# Right Segment
geom_segment(aes(x = -81.825, y = 24.47, xend = -81.781, yend = 24.485), size = 0.25) +
geom_rect(aes(xmin = -81.86, xmax = -81.825, ymin =24.449, ymax =24.47), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
annotation_scale(location = "bl") +
annotation_north_arrow(location = "br", which_north = "true", style = north_arrow_minimal()) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
scale_x_continuous(breaks = c(seq(-82, -80, by = .05))) +
scale_y_continuous(breaks = c(seq(24, 25, by = .05))) +
theme_bw() +
theme(panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
plot.background = element_blank(),
axis.title = element_blank(),
axis.ticks = element_line(color = "black"),
axis.text = element_text(color = "black"),
legend.position = "none")
edrSites <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.2) +
geom_sf(data = bathy$geometry, color = "grey30", size = 0.25) +
geom_point(data = sites, aes(x = long_x, y = lat_y, fill = site, shape = species), size = 2, alpha = 1) +
scale_shape_manual(values = c(21,22), name = "Species", labels = c("ACER", "APAL")) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
coord_sf(xlim = c(-81.8459, -81.8427), ylim = c(24.45856,  24.4601)) +
annotation_scale(location = "bl") +
scale_fill_discrete(name = "Site")+
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.position = "right",
legend.direction = "vertical",
legend.box = "horizontal",
plot.background = element_blank())
# # edr_legend <- cowplot::get_legend(edrSites)
# # edr_legend <- ggpubr::as_ggplot(edr_legend)
# # Function to create the legend
# create_legend <- function() {
#   get_legend(edrSites) %>% as_ggplot()
# }
# edrLeg <- create_legend()
# #In order for this to work... you have to change legend.position = "none" to legend.position = "right" (or wve direction you want) the legend from EDR sites above... working to make this better
# # leg <- get_legend(edrSites)
# # edrLeg <- as_ggplot(leg)
#
# edrMap = ggdraw() +
#   draw_plot(mainKeys) +
#   draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
#   draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
# edrNew <- edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm')))
# Function to create the legend
create_legend <- function() {
get_legend(edrSites) %>% as_ggplot()
}
# Function to create the combined map and legend
create_combined_map_legend <- function() {
edrMap <- ggdraw() +
draw_plot(mainKeys) +
draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
edrLeg <- create_legend()
return(edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm'))))
}
print(create_combined_map_legend)
flPal = paletteer_d("vapoRwave::jazzCup")[c(2:5)]
boundPal = c("gray30", paletteer_d("vapoRwave::vapoRwave")[10])
floridaMap = ggplot() +
geom_sf(data = states, fill = "white", size = 0.25) +
geom_sf(data = countries, fill = "white", size = 0.25) +
geom_sf(data = fknmsBounds, alpha = 0.1) +
geom_rect(aes(xmin = -82.216, xmax = -81.3464, ymin = 24.2806, ymax =24.8452), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
coord_sf(xlim = c(-89, -77), ylim = c(22, 31)) +
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.text = element_text(size = 9),
legend.position = "none",
plot.background = element_blank())
mainKeys <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.1) +
geom_sf(data = bathy$geometry, color = "gray75", size = 0.25) +
coord_sf(xlim = c(-81.955348, -81.689479), ylim = c(24.448239,  24.616647)) +
geom_star(data = edr, aes(x = long_x, y = lat_y, starshape = reef, fill = reef), size = 10)+
#Left Segment
geom_segment(aes(x = -81.86, y = 24.47, xend = -81.900, yend = 24.485), size = 0.25) +
# Right Segment
geom_segment(aes(x = -81.825, y = 24.47, xend = -81.781, yend = 24.485), size = 0.25) +
geom_rect(aes(xmin = -81.86, xmax = -81.825, ymin =24.449, ymax =24.47), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
annotation_scale(location = "bl") +
annotation_north_arrow(location = "br", which_north = "true", style = north_arrow_minimal()) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
scale_x_continuous(breaks = c(seq(-82, -80, by = .05))) +
scale_y_continuous(breaks = c(seq(24, 25, by = .05))) +
theme_bw() +
theme(panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
plot.background = element_blank(),
axis.title = element_blank(),
axis.ticks = element_line(color = "black"),
axis.text = element_text(color = "black"),
legend.position = "none")
edrSites <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.2) +
geom_sf(data = bathy$geometry, color = "grey30", size = 0.25) +
geom_point(data = sites, aes(x = long_x, y = lat_y, fill = site, shape = species), size = 2, alpha = 1) +
scale_shape_manual(values = c(21,22), name = "Species", labels = c("ACER", "APAL")) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
coord_sf(xlim = c(-81.8459, -81.8427), ylim = c(24.45856,  24.4601)) +
annotation_scale(location = "bl") +
scale_fill_discrete(name = "Site")+
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.position = "right",
legend.direction = "vertical",
legend.box = "horizontal",
plot.background = element_blank())
# # edr_legend <- cowplot::get_legend(edrSites)
# # edr_legend <- ggpubr::as_ggplot(edr_legend)
# # Function to create the legend
# create_legend <- function() {
#   get_legend(edrSites) %>% as_ggplot()
# }
# edrLeg <- create_legend()
# #In order for this to work... you have to change legend.position = "none" to legend.position = "right" (or wve direction you want) the legend from EDR sites above... working to make this better
# # leg <- get_legend(edrSites)
# # edrLeg <- as_ggplot(leg)
#
# edrMap = ggdraw() +
#   draw_plot(mainKeys) +
#   draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
#   draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
# edrNew <- edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm')))
# Function to create the legend
create_legend <- function() {
get_legend(edrSites) %>% as_ggplot()
}
# Function to create the combined map and legend
create_combined_map_legend <- function() {
edrMap <- ggdraw() +
draw_plot(mainKeys) +
draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
edrLeg <- create_legend()
return(edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm'))))
}
ggsave("../figures/figure1Jitter.png", plot = create_combined_map_legend(), width = 16, height = 16, units = "cm", dpi = 600)
flPal = paletteer_d("vapoRwave::jazzCup")[c(2:5)]
boundPal = c("gray30", paletteer_d("vapoRwave::vapoRwave")[10])
floridaMap = ggplot() +
geom_sf(data = states, fill = "white", size = 0.25) +
geom_sf(data = countries, fill = "white", size = 0.25) +
geom_sf(data = fknmsBounds, alpha = 0.1) +
geom_rect(aes(xmin = -82.216, xmax = -81.3464, ymin = 24.2806, ymax =24.8452), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
coord_sf(xlim = c(-89, -77), ylim = c(22, 31)) +
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.text = element_text(size = 9),
legend.position = "none",
plot.background = element_blank())
mainKeys <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.1) +
geom_sf(data = bathy$geometry, color = "gray75", size = 0.25) +
coord_sf(xlim = c(-81.955348, -81.689479), ylim = c(24.448239,  24.616647)) +
geom_star(data = edr, aes(x = long_x, y = lat_y, starshape = reef, fill = reef), size = 10)+
#Left Segment
geom_segment(aes(x = -81.86, y = 24.47, xend = -81.900, yend = 24.485), size = 0.25) +
# Right Segment
geom_segment(aes(x = -81.825, y = 24.47, xend = -81.781, yend = 24.485), size = 0.25) +
geom_rect(aes(xmin = -81.86, xmax = -81.825, ymin =24.449, ymax =24.47), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
annotation_scale(location = "bl") +
annotation_north_arrow(location = "br", which_north = "true", style = north_arrow_minimal()) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
scale_x_continuous(breaks = c(seq(-82, -80, by = .05))) +
scale_y_continuous(breaks = c(seq(24, 25, by = .05))) +
theme_bw() +
theme(panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
plot.background = element_blank(),
axis.title = element_blank(),
axis.ticks = element_line(color = "black"),
axis.text = element_text(color = "black"),
legend.position = "none")
edrSites <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.2) +
geom_sf(data = bathy$geometry, color = "grey30", size = 0.25) +
geom_point(data = sites, aes(x = long_x, y = lat_y, fill = site, shape = species), size = 2, alpha = 1) +
scale_shape_manual(values = c(21,22), name = "Species", labels = c("ACER", "APAL")) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
coord_sf(xlim = c(-81.8459, -81.8427), ylim = c(24.45856,  24.4601)) +
annotation_scale(location = "bl") +
scale_fill_discrete(name = "Site")+
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.position = "right",
legend.direction = "vertical",
legend.box = "horizontal",
plot.background = element_blank())
# edr_legend <- cowplot::get_legend(edrSites)
# edr_legend <- ggpubr::as_ggplot(edr_legend)
# In order for this to work... you have to change legend.position = "none" to legend.position = "right" (or wve direction you want) the legend from EDR sites above... working to make this better
leg <- get_legend(edrSites)
edrLeg <- as_ggplot(leg)
# #
edrMap = ggdraw() +
draw_plot(mainKeys) +
draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
#
edrNew <- edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm')))
ggsave("../figures/figure1Jitter.png", plot = edrMap, width = 16, height = 16, units = "cm", dpi = 600)
ggsave("../figures/figure1.png", plot = edrMap, width = 16, height = 16, units = "cm", dpi = 600)
ggsave("../figures/figure1Legend.png", plot = edrLeg, width = 16, height = 16, units = "cm", dpi = 600)
flPal = paletteer_d("vapoRwave::jazzCup")[c(2:5)]
boundPal = c("gray30", paletteer_d("vapoRwave::vapoRwave")[10])
floridaMap = ggplot() +
geom_sf(data = states, fill = "white", size = 0.25) +
geom_sf(data = countries, fill = "white", size = 0.25) +
geom_sf(data = fknmsBounds, alpha = 0.1) +
geom_rect(aes(xmin = -82.216, xmax = -81.3464, ymin = 24.2806, ymax =24.8452), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
coord_sf(xlim = c(-89, -77), ylim = c(22, 31)) +
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.text = element_text(size = 9),
legend.position = "none",
plot.background = element_blank())
mainKeys <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.1) +
geom_sf(data = bathy$geometry, color = "gray75", size = 0.25) +
coord_sf(xlim = c(-81.955348, -81.689479), ylim = c(24.448239,  24.616647)) +
geom_star(data = edr, aes(x = long_x, y = lat_y, starshape = reef, fill = reef), size = 10)+
#Left Segment
geom_segment(aes(x = -81.86, y = 24.47, xend = -81.900, yend = 24.485), size = 0.25) +
# Right Segment
geom_segment(aes(x = -81.825, y = 24.47, xend = -81.781, yend = 24.485), size = 0.25) +
geom_rect(aes(xmin = -81.86, xmax = -81.825, ymin =24.449, ymax =24.47), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
annotation_scale(location = "bl") +
annotation_north_arrow(location = "br", which_north = "true", style = north_arrow_minimal()) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
scale_x_continuous(breaks = c(seq(-82, -80, by = .05))) +
scale_y_continuous(breaks = c(seq(24, 25, by = .05))) +
theme_bw() +
theme(panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
plot.background = element_blank(),
axis.title = element_blank(),
axis.ticks = element_line(color = "black"),
axis.text = element_text(color = "black"),
legend.position = "none")
edrSites <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.2) +
geom_sf(data = bathy$geometry, color = "grey30", size = 0.25) +
geom_point(data = sites, aes(x = long_x, y = lat_y, fill = site, shape = species), size = 2, alpha = 1) +
scale_shape_manual(values = c(21,22), name = "Species", labels = c("ACER", "APAL")) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
coord_sf(xlim = c(-81.8459, -81.8427), ylim = c(24.45856,  24.4601)) +
annotation_scale(location = "bl") +
scale_fill_discrete(name = "Site")+
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.position = "right",
legend.direction = "vertical",
legend.box = "horizontal",
plot.background = element_blank())
# edr_legend <- cowplot::get_legend(edrSites)
# edr_legend <- ggpubr::as_ggplot(edr_legend)
# In order for this to work... you have to change legend.position = "none" to legend.position = "right" (or wve direction you want) the legend from EDR sites above... working to make this better
leg <- get_legend(edrSites)
edrLeg <- as_ggplot(leg)
# #
edrMap = ggdraw() +
draw_plot(mainKeys) +
draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
#
flPal = paletteer_d("vapoRwave::jazzCup")[c(2:5)]
boundPal = c("gray30", paletteer_d("vapoRwave::vapoRwave")[10])
floridaMap = ggplot() +
geom_sf(data = states, fill = "white", size = 0.25) +
geom_sf(data = countries, fill = "white", size = 0.25) +
geom_sf(data = fknmsBounds, alpha = 0.1) +
geom_rect(aes(xmin = -82.216, xmax = -81.3464, ymin = 24.2806, ymax =24.8452), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
coord_sf(xlim = c(-89, -77), ylim = c(22, 31)) +
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.text = element_text(size = 9),
legend.position = "none",
plot.background = element_blank())
mainKeys <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.1) +
geom_sf(data = bathy$geometry, color = "gray75", size = 0.25) +
coord_sf(xlim = c(-81.955348, -81.689479), ylim = c(24.448239,  24.616647)) +
geom_star(data = edr, aes(x = long_x, y = lat_y, starshape = reef, fill = reef), size = 10)+
#Left Segment
geom_segment(aes(x = -81.86, y = 24.47, xend = -81.900, yend = 24.485), size = 0.25) +
# Right Segment
geom_segment(aes(x = -81.825, y = 24.47, xend = -81.781, yend = 24.485), size = 0.25) +
geom_rect(aes(xmin = -81.86, xmax = -81.825, ymin =24.449, ymax =24.47), color = paletteer_d("vapoRwave::vapoRwave")[6], fill = NA, size = 1) +
annotation_scale(location = "bl") +
annotation_north_arrow(location = "br", which_north = "true", style = north_arrow_minimal()) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
scale_x_continuous(breaks = c(seq(-82, -80, by = .05))) +
scale_y_continuous(breaks = c(seq(24, 25, by = .05))) +
theme_bw() +
theme(panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
plot.background = element_blank(),
axis.title = element_blank(),
axis.ticks = element_line(color = "black"),
axis.text = element_text(color = "black"),
legend.position = "none")
edrSites <- ggplot() +
geom_sf(data = flKeys$geometry, fill = "white", color = "gray30") +
geom_sf(data = fknmsBounds, fill = "black", alpha = 0.2) +
geom_sf(data = bathy$geometry, color = "grey30", size = 0.25) +
geom_point(data = sites, aes(x = long_x, y = lat_y, fill = site, shape = species), size = 2, alpha = 1) +
scale_shape_manual(values = c(21,22), name = "Species", labels = c("ACER", "APAL")) +
guides(fill = guide_legend(override.aes = list(shape = 22, color = NA, size = 4), ncol = 2, order = 1), shape = guide_legend(override.aes = list(size = 3), order = 2), color = guide_legend(override.aes = list(fill = "black", alpha = 0.1), order = 3)) +
coord_sf(xlim = c(-81.8459, -81.8427), ylim = c(24.45856,  24.4601)) +
annotation_scale(location = "bl") +
scale_fill_discrete(name = "Site")+
theme_bw() +
theme(legend.title = element_text(size = 9, face = "bold"),
axis.ticks = element_blank(),
axis.text = element_blank(),
axis.title = element_blank(),
panel.background = element_rect(fill = "aliceblue"),
panel.border = element_rect(color = "black", size = 0.75, fill = NA),
legend.position = "none",
legend.direction = "vertical",
legend.box = "horizontal",
plot.background = element_blank())
edrMap = ggdraw() +
draw_plot(mainKeys) +
draw_plot(floridaMap, x = .08, y = 0.6, width = 0.25, height = 0.25) +
draw_plot(edrSites, x =.28, y = .25, width = 0.4, height = 0.4)
#
edrNew <- edrMap / edrLeg + plot_layout(heights = unit(c(5,1), c('cm')))
ggsave("../figures/figure1Jitter.png", plot = edrMap, width = 16, height = 16, units = "cm", dpi = 600)
ggsave("../figures/figure1.png", plot = edrMap, width = 16, height = 16, units = "cm", dpi = 600)
ggsave("../figures/figure1Legend.png", plot = edrLeg, width = 16, height = 16, units = "cm", dpi = 600)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate_all(as.character) %>%
mutate(filename = flnm)
}
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
as.tibble()
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`) %>%
mutate_at(c("Date", "Site", "Species"), as.factor) %>%
mutate_at(c("Area"), as.numeric) %>%
select(Date, Site, Species, Area) %>%
group_by(Date, Site) %>%
filter(Species == c("Acropora cervicornis", "Acropora palmata")) %>%
droplevels()
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
as.tibble()
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
as_tibble()
knitr::opts_chunk$set(warning = FALSE, fig.align = 'left')
library(magrittr)
if (!require("pacman")) install.packages("pacman")
pacman::p_load("ggplot2","officer","ggpubr", "rcompanion", "RColorBrewer", "patchwork", "magrittr","reshape2", "stringr", "plyr", "dplyr", "flextable", "tidyr", "tibble", "vegan", "paletteer", "purrr", "readr")
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate_all(as.character) %>%
mutate(filename = flnm)
}
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
as_tibble()
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`) %>%
mutate_at(c("Date", "Site", "Species"), as.factor) %>%
mutate_at(c("Area"), as.numeric) %>%
select(Date, Site, Species, Area) %>%
group_by(Date, Site) %>%
filter(Species == c("Acropora cervicornis", "Acropora palmata")) %>%
droplevels()
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.)) %>%
as_tibble()
View(tagData1)
head(tagData1)
read_plus <- function(flnm) {
read_csv(flnm) %>%
mutate_all(as.character) %>%
mutate(filename = flnm)
}
tagData1 <-
list.files(path = "../data/TagLab", pattern = "*.csv",
full.names = T) %>%
map_df(~read_plus(.))
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove))
View(tagData1)
View(tagData)
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-")
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`)
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
dplyr::rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`)
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
dplyr::rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`) %>%
mutate_at(c("Date", "Site", "Species"), as.factor)
tagData <- tagData1 %>%
tidyr::separate(filename, into=c("remove", "Site"),extra = 'merge',sep = 18) %>%
tidyr::separate(Site, into=c("Site", "remove"),sep = "TagLab.csv") %>%
dplyr::select(-c(remove)) %>%
mutate_if(is.character, str_replace_all, pattern = "_", replacement = "-") %>%
dplyr::rename(Species = `TagLab Class name`, Date = `TagLab Date`, Area = `TagLab Area`) %>%
mutate_at(c("Date", "Site", "Species"), as.factor) %>%
mutate_at(c("Area"), as.numeric) %>%
select(Date, Site, Species, Area) %>%
group_by(Date, Site) %>%
filter(Species == c("Acropora cervicornis", "Acropora palmata")) %>%
droplevels()
